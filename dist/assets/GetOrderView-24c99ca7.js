/* empty css             *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                        *//* empty css                 */import{_ as M}from"./BackBtnView-d3429739.js";import{F as $}from"./FilterView-15e0f7da.js";import{P as N}from"./ProductCardView-c404245e.js";/* empty css                                                                    */import{_ as z,j as d,q as A,s as h,c as g,a as o,b as c,d as f,F,r as Z,w as i,l as C,e as D,f as G,R as O,I as R,i as T,o as v,X as U,J as P,p as q,g as J,H as K,y as Q,z as V,af as X,M as W}from"./index-e79a3e3f.js";import{u as Y}from"./productStore-af8b3064.js";/* empty css                         *//* empty css                     */import"./filter-ddd7e585.js";/* empty css                    *//* empty css                                                                   */const w=p=>(q("data-v-ebcab917"),p=p(),J(),p),ee={class:"d-flex align-items-center justify-content-between mb-5"},te=w(()=>o("p",{class:"m-0 main-title"},"Buyurtma olish",-1)),oe={class:"d-flex justify-content-center"},ae={class:"dialog-footer d-flex gap-2 justify-content-center"},le=w(()=>o("button",{class:"basket-btn"},[o("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("g",{"clip-path":"url(#clip0_1115_1598)"},[o("path",{d:"M19.4375 16.25C20.375 16.25 21.2 15.7375 21.625 14.9625L26.1 6.85C26.5625 6.025 25.9625 5 25.0125 5H6.5125L5.3375 2.5H1.25V5H3.75L8.25 14.4875L6.5625 17.5375C5.65 19.2125 6.85 21.25 8.75 21.25H23.75V18.75H8.75L10.125 16.25H19.4375ZM7.7 7.5H22.8875L19.4375 13.75H10.6625L7.7 7.5ZM8.75 22.5C7.375 22.5 6.2625 23.625 6.2625 25C6.2625 26.375 7.375 27.5 8.75 27.5C10.125 27.5 11.25 26.375 11.25 25C11.25 23.625 10.125 22.5 8.75 22.5ZM21.25 22.5C19.875 22.5 18.7625 23.625 18.7625 25C18.7625 26.375 19.875 27.5 21.25 27.5C22.625 27.5 23.75 26.375 23.75 25C23.75 23.625 22.625 22.5 21.25 22.5Z",fill:"white"})]),o("defs",null,[o("clipPath",{id:"clip0_1115_1598"},[o("rect",{width:"30",height:"30",fill:"white"})])])])],-1)),se={__name:"GetOrderView",setup(p){const x=K(),n=Y();let l=d(!1);const s=d(0),a=d([]),y=d([]);let r=d(0);const B=function(){Q.go(-1)},I=function(t){l.value=!0,r.value=t},H=function(){if(s.value!==0)if(a.value[r.value].count<s.value)V.error("Bunday hajmdagi mahsulot omborda mavjud emas");else{if(n.basketProducts.length>0){let t=!1;n.basketProducts.forEach(e=>{e.product.product_id===a.value[r.value].product_id&&(e.count+=s.value,t=!0,console.log(1))}),t||(console.log(2),n.basketProducts.push({product:a.value[r.value],count:s.value}),t=!1)}else n.basketProducts.push({product:a.value[r.value],count:s.value});a.value[r.value].count-=s.value,console.log("count:",a.value[r.value].count),V.success("Savatga qo'shildi")}l.value=!1,s.value=0},m=d(""),E=t=>{m.value.length?h.get(`/stock?filter[name]=${m.value}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(e=>{console.log(e.data),a.value=e.data.data}).catch(e=>{console.log(e)}):h.get("/stock",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(e=>{var _;a.value=(_=e==null?void 0:e.data)==null?void 0:_.data}).catch(e=>{console.log(e)})};return A(()=>{n.basketProducts.length===0?h.get("/stock",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(t=>{console.log("allproducts",t.data.data),a.value=t.data.data,y.value=t.data.data,n.allProducts=t.data.data}).catch(t=>{console.log(t)}):a.value=n.allProducts}),(t,e)=>{const _=O,L=X,k=W,S=R,j=T("router-link");return v(),g("div",null,[o("div",ee,[c(M,{onClick:B}),te,o("div",null,[c($)])]),o("div",null,[c(_,{onKeyup:E,modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=u=>m.value=u),placeholder:"Qidiruv",type:"search","suffix-icon":f(U),class:"mb-3"},null,8,["modelValue","suffix-icon"])]),(v(!0),g(F,null,Z(a.value,(u,b)=>(v(),g("div",{class:"mb-3",key:b},[c(N,{product:u,onClick:ue=>I(b)},null,8,["product","onClick"])]))),128)),c(S,{modelValue:f(l),"onUpdate:modelValue":e[3]||(e[3]=u=>C(l)?l.value=u:l=u),width:"80%",center:""},{footer:i(()=>[o("span",ae,[c(k,{onClick:e[2]||(e[2]=u=>C(l)?l.value=!1:l=!1)},{default:i(()=>[P("Cancel")]),_:1}),c(k,{type:"primary",onClick:H},{default:i(()=>[P(" Confirm ")]),_:1})])]),default:i(()=>[o("div",oe,[c(L,{modelValue:s.value,"onUpdate:modelValue":e[1]||(e[1]=u=>s.value=u),min:0},null,8,["modelValue"])])]),_:1},8,["modelValue"]),f(n).basketProducts.length>0?(v(),D(j,{key:0,to:`/basket-orders/${f(x).params.id}`},{default:i(()=>[le]),_:1},8,["to"])):G("",!0)])}}},we=z(se,[["__scopeId","data-v-ebcab917"]]);export{we as default};
