/* empty css             *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                        *//* empty css                 */import{_ as E,o as v,c as h,a as e,j as l,q as z,s as g,b as c,t as d,k as T,x as q,F,r as N,d as O,w as b,l as I,f as A,H as L,z as U,I as Z,J as j,p as H,g as J,y as R,af as K,M as Y}from"./index-e79a3e3f.js";import{_ as G}from"./BackBtnView-d3429739.js";import{P as Q}from"./ProductCardView-c404245e.js";import{C as W}from"./ClientCardView-5f75ea30.js";import{T as X}from"./TableView-52bca027.js";import"./BtnPdfMaker.vue_vue_type_style_index_0_scoped_03fb6f62_lang-0a3ab248.js";/* empty css                         *//* empty css                     */import"./el-dropdown-item-4ed993c7.js";/* empty css                */import"./clientStore-8611536b.js";/* empty css                   */const ee={__name:"BtnPdfMaker",props:{confirmedOrder:Object},setup(p){const r=p;return console.log("propssss",r.confirmedOrder),r.confirmedOrder,(s,_)=>(v(),h("div",null,[e("button",{class:"configure-btn blue",onClick:_[0]||(_[0]=(...f)=>s.generatePDF&&s.generatePDF(...f))}," PDF da saqlash ")]))}},te=E(ee,[["__scopeId","data-v-03fb6f62"]]);const n=p=>(H("data-v-8e654844"),p=p(),J(),p),oe={key:0},ae={class:"d-flex align-items-center justify-content-between mb-5"},se=n(()=>e("p",{class:"m-0 main-title"},"Buyurtmani tahrirlash",-1)),le=n(()=>e("div",null,null,-1)),ne={class:"order-card my-3"},ie=n(()=>e("p",{class:"underline-title"},"Buyurtma oluvchi",-1)),ce={class:"d-flex align-items-center gap-3 mb-3"},de=n(()=>e("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M10 0C4.48 0 0 4.48 0 10C0 15.52 4.48 20 10 20C15.52 20 20 15.52 20 10C20 4.48 15.52 0 10 0ZM10 4C11.93 4 13.5 5.57 13.5 7.5C13.5 9.43 11.93 11 10 11C8.07 11 6.5 9.43 6.5 7.5C6.5 5.57 8.07 4 10 4ZM10 18C7.97 18 5.57 17.18 3.86 15.12C5.55 13.8 7.68 13 10 13C12.32 13 14.45 13.8 16.14 15.12C14.43 17.18 12.03 18 10 18Z",fill:"black","fill-opacity":"0.4"})],-1)),re={class:"agent m-0"},ue={class:"d-flex align-items-center gap-3"},_e=n(()=>e("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M17.01 12.38C15.78 12.38 14.59 12.18 13.48 11.82C13.13 11.7 12.74 11.79 12.47 12.06L10.9 14.03C8.07 12.68 5.42 10.13 4.01 7.2L5.96 5.54C6.23 5.26 6.31 4.87 6.2 4.52C5.83 3.41 5.64 2.22 5.64 0.99C5.64 0.45 5.19 0 4.65 0H1.19C0.65 0 0 0.24 0 0.99C0 10.28 7.73 18 17.01 18C17.72 18 18 17.37 18 16.82V13.37C18 12.83 17.55 12.38 17.01 12.38Z",fill:"black","fill-opacity":"0.4"})],-1)),pe={class:"phone m-0"},me={class:"order-card"},ve={class:"d-flex align-items-center justify-content-between mb-3"},he=n(()=>e("p",{class:"m-0"},"Yetkazish vaqti",-1)),fe={class:"text m-0"},ge={class:"d-flex align-items-center justify-content-between mb-5"},be=n(()=>e("p",{class:"m-0"},"Jami narxi",-1)),Ce={class:"text m-0"},ke={class:"d-flex align-items-center justify-content-between mb-3"},ye={class:"m-0"},we={class:"text price m-0"},xe={class:"d-flex align-items-center justify-content-between mb-3"},Be=n(()=>e("p",{class:"m-0"},"To’lanadigan narx",-1)),Ve={class:"text price m-0"},Oe={class:"d-flex align-items-center justify-content-between"},Ie=n(()=>e("p",{class:"m-0"},"To’lov usuli",-1)),je={class:"text phone m-0"},Ee={key:0},Se={class:"input-label mb-3"},$e=n(()=>e("label",{for:"phone"},"Keshbek foizi",-1)),De={class:"input-wrap"},Me={key:1},Pe={class:"d-flex justify-content-center"},ze={class:"dialog-footer d-flex gap-2 justify-content-center"},Te={__name:"EditOrderView",setup(p){const r=L();let s=l(!1);const _=l(0),f=l(!1),t=l({}),y=l(!1),w=l(""),C=l(0),x=l({}),k=l([]),u=l({}),S=function(){R.go(-1)},$=function(o){s.value=!0,C.value=o,_.value=t.value.products[o].count},D=function(){t.value.products[C.value].count=_.value,s.value=!1,t.value.update_total_price=0,t.value.products.forEach(o=>{t.value.update_total_price+=o.count*o.product.sell_price}),console.log(t.value)},M=function(){u.value.delivery_time=t.value.delivery_time,u.value.client_id=t.value.client_id,u.value.payment_type_id=t.value.payment_type_id,u.value.cashback=t.value.cashback,u.value.products=[],t.value.products.forEach((o,a)=>{u.value.products.push({id:o.id,product_id:o.product_id,stock_product_id:o.stock_product_id,count:o.count,old_count:k.value[a]})}),console.log("sumbitorder",u.value),g.put(`/order/${r.params.id}`,u.value,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(o=>{console.log("put req",o.data),g.get(`/order/${r.params.id}/pending`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(a=>{console.log("pending",a.data),U.success("Tasdiqlandi!"),f.value=!0,g.get(`/order/${r.params.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(m=>{console.log(m.data.data),x.value=m.data.data}).catch(m=>{console.log(m)})}).catch(a=>{console.log(a)})}).catch(o=>{console.log(o)})};return z(async()=>{await g.get(`order/${r.params.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(o=>{console.log("roder",o.data.data),t.value=o.data.data,t.value.products.forEach(a=>{k.value.push(a.count)}),w.value=new Date(o.data.data.delivery_time*1e3),y.value=!0}).catch(o=>{console.log(o)})}),(o,a)=>{const m=K,B=Y,P=Z;return y.value?(v(),h("div",oe,[e("div",ae,[c(G,{onClick:S}),se,le]),e("div",null,[c(W,{legal_name:t.value.client.legal_name,name:t.value.client.name,img:t.value.client.file,"about-client":t.value.client.id,location:t.value.client.location},null,8,["legal_name","name","img","about-client","location"])]),e("div",null,[e("div",ne,[ie,e("div",ce,[de,e("p",re,d(t.value.user.detail[0].first_name)+" "+d(t.value.user.detail[0].last_name),1)]),e("div",ue,[_e,e("p",pe,d(t.value.user.username),1)])])]),e("div",me,[e("div",ve,[he,e("p",fe,d(w.value.toLocaleDateString("en-US")),1)]),e("div",ge,[be,e("p",Ce,d(t.value.update_total_price)+" so’m",1)]),e("div",ke,[e("p",ye,"CashBack ( "+d(t.value.cashback)+" %)",1),e("p",we,d(t.value.update_total_price*t.value.cashback/100)+" so’m ",1)]),e("div",xe,[Be,e("p",Ve,d(t.value.update_total_price-t.value.update_total_price*t.value.cashback/100)+" so’m ",1)]),e("div",Oe,[Ie,e("p",je,d(t.value.payment_type.name),1)])]),f.value?(v(),h("div",Me,[c(X,{product:t.value.products,route:O(r).name},null,8,["product","route"]),c(te,{confirmedOrder:x.value,class:"mt-4"},null,8,["confirmedOrder"])])):(v(),h("div",Ee,[e("div",Se,[$e,e("div",De,[T(e("input",{type:"text",class:"input","onUpdate:modelValue":a[0]||(a[0]=i=>t.value.cashback=i)},null,512),[[q,t.value.cashback]])])]),(v(!0),h(F,null,N(t.value.products,(i,V)=>(v(),h("div",{class:"mb-3",key:V},[c(Q,{product:i,onClick:qe=>$(V)},null,8,["product","onClick"])]))),128)),e("div",null,[e("button",{onClick:M,class:"configure-btn green"}," Buyurtmani tasdiqlash ")])])),c(P,{modelValue:O(s),"onUpdate:modelValue":a[3]||(a[3]=i=>I(s)?s.value=i:s=i),width:"80%",center:""},{footer:b(()=>[e("span",ze,[c(B,{onClick:a[2]||(a[2]=i=>I(s)?s.value=!1:s=!1)},{default:b(()=>[j("Cancel")]),_:1}),c(B,{type:"primary",onClick:D},{default:b(()=>[j(" Confirm ")]),_:1})])]),default:b(()=>[e("div",Pe,[c(m,{modelValue:_.value,"onUpdate:modelValue":a[1]||(a[1]=i=>_.value=i),min:0,max:k.value[C.value]},null,8,["modelValue","max"])])]),_:1},8,["modelValue"])])):A("",!0)}}},at=E(Te,[["__scopeId","data-v-8e654844"]]);export{at as default};
