/* empty css             *//* empty css                                                                      */import{_ as S,n as k,j as E,q as U,c as u,a as s,b as _,k as n,x as p,F as I,r as B,G as T,H as q,o as c,t as D,B as F,p as j,g as M,y as v,z as m,E as C}from"./index-e79a3e3f.js";import{_ as O}from"./BackBtnView-d3429739.js";import{u as P}from"./staffStore-66c9d8b6.js";import{u as L}from"./useUploadFileStore-2c0d6f39.js";const l=d=>(j("data-v-47d0e188"),d=d(),M(),d),R={class:"pb-4"},N={class:"d-flex align-items-center justify-content-between"},X=l(()=>s("p",{class:"m-0 main-title"},"Ma'lumotlarni tahrirlash",-1)),z=l(()=>s("div",null,null,-1)),A={class:"form"},G={class:"input-label mb-3"},H=l(()=>s("label",{for:"phone"},"Ismi",-1)),J={class:"input-wrap"},K={class:"input-label mb-3"},Q=l(()=>s("label",{for:"phone"},"Familyasi",-1)),W={class:"input-wrap"},Y={class:"input-label mb-3"},Z=l(()=>s("label",{for:"phone"},"Oylik maoshi",-1)),$={class:"input-wrap"},ss={class:"input-label mb-3"},ts=l(()=>s("label",{for:"phone"},"Oylik maoshi (%)",-1)),es={class:"input-wrap"},as={class:"input-label mb-3"},os=l(()=>s("label",{for:"phone"},"Xodim rasmi",-1)),ls={class:"input-wrap"},is={class:"input-label mb-3"},ns=l(()=>s("label",{for:"phone"},"Telefon raqam / Login",-1)),ps={class:"input-wrap"},ds={class:"input-label mb-3"},rs=l(()=>s("label",{for:"phone"},"Parol",-1)),us={class:"input-wrap"},_s={class:"input-label mb-3"},cs=l(()=>s("label",{for:"phone"},"Parol",-1)),ms={class:"input-wrap"},fs=l(()=>s("hr",null,null,-1)),hs={class:"checkboxes"},vs=l(()=>s("p",{class:"m-0 title mb-3"},"Ruxsatlar",-1)),ys=["for"],bs={class:"m-0"},ws={__name:"EditStaffView",setup(d){const t=k({first_name:null,last_name:null,file_id:null,salary_int:null,salary_percent:null,image:null,phone:null,password:null,password_confirm:null,permissions:[]});t.fullname,t.salary,t.salary_percent,t.image,t.phone,t.password;const y=o=>{h.setFile(o.target.files[0]),t.file_id=T(()=>h.fileID)},b=function(){v.go(-1)},f=P(),h=L(),r=q(),i=E({}),w=function(){console.log("formdata",t),console.log("file_id",t.file_id),t.permissions.forEach(o=>{o.permission?o.permission=1:o.permission=0}),t.file_id||m.info("Rasm yuklanmagan"),f.UPDATE(r.params.id,t).then(o=>{console.log(o.data),m.success("Muvofaqqiyatli bajarildi"),setTimeout(()=>{v.go(-1)},700)}).catch(o=>{console.log("jas",o),o.response.status===422&&m.error("To'ldirilmagan maydonlarni to'ldiring")})};return U(()=>{console.log("params",r.params.id),f.ITEM(r.params.id).then(o=>{console.log(o.data),i.value=o.data.data,t.first_name=i.value.detail[0].first_name,t.last_name=i.value.detail[0].last_name,t.salary_int=i.value.detail[0].salary_int,t.salary_percent=i.value.detail[0].salary_percent,t.phone=i.value.username,t.password=i.value.password,t.password_confirm=i.value.password,t.file_id=i.value.detail[0].file_id,i.value.permissions.forEach(e=>{e.permission===1?e.permission=!0:e.permission=!1,t.permissions.push(e)})}).catch(o=>{console.log(o)})}),(o,e)=>{const g=C;return c(),u("div",R,[s("div",N,[_(O,{onClick:b}),X,z]),s("div",A,[s("div",G,[H,s("div",J,[n(s("input",{type:"text",class:"input","onUpdate:modelValue":e[0]||(e[0]=a=>t.first_name=a)},null,512),[[p,t.first_name]])])]),s("div",K,[Q,s("div",W,[n(s("input",{type:"text",class:"input","onUpdate:modelValue":e[1]||(e[1]=a=>t.last_name=a)},null,512),[[p,t.last_name]])])]),s("div",Y,[Z,s("div",$,[n(s("input",{type:"text",class:"input","onUpdate:modelValue":e[2]||(e[2]=a=>t.salary_int=a)},null,512),[[p,t.salary_int]])])]),s("div",ss,[ts,s("div",es,[n(s("input",{type:"text",class:"input","onUpdate:modelValue":e[3]||(e[3]=a=>t.salary_percent=a)},null,512),[[p,t.salary_percent]])])]),s("div",as,[os,s("div",ls,[s("input",{type:"file",class:"input",onChange:y},null,32)])]),s("div",is,[ns,s("div",ps,[n(s("input",{type:"text",class:"input","onUpdate:modelValue":e[4]||(e[4]=a=>t.phone=a)},null,512),[[p,t.phone]])])]),s("div",ds,[rs,s("div",us,[n(s("input",{type:"password",class:"input","onUpdate:modelValue":e[5]||(e[5]=a=>t.password=a)},null,512),[[p,t.password]])])]),s("div",_s,[cs,s("div",ms,[n(s("input",{type:"password",class:"input","onUpdate:modelValue":e[6]||(e[6]=a=>t.password_confirm=a)},null,512),[[p,t.password_confirm]])])])]),fs,s("div",hs,[vs,(c(!0),u(I,null,B(t.permissions,(a,x)=>(c(),u("div",{class:"mb-3",key:x},[s("label",{for:a.id,class:"input-wrap d-flex align-items-center justify-content-between"},[s("p",bs,D(a.permission_name),1),_(g,{id:a.id,modelValue:a.permission,"onUpdate:modelValue":V=>a.permission=V},null,8,["id","modelValue","onUpdate:modelValue"])],8,ys)]))),128))]),_(F,{onClick:w,text:"Saqlash"})])}}},Us=S(ws,[["__scopeId","data-v-47d0e188"]]);export{Us as default};
