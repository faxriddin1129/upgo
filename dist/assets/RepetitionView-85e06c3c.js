/* empty css             *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                        *//* empty css                 *//* empty css                         *//* empty css                     */import"./el-dropdown-item-4ed993c7.js";/* empty css                */import{_ as A,j as n,q as P,s as E,d as r,c as b,a as e,b as i,t as c,l as g,F as Y,r as H,w as _,J as w,f as M,C as J,H as Q,y as I,z as j,R as G,I as K,o as y,e as W,Y as X,p as ee,g as te,i as oe,N as ae,a1 as le,T as se,U as ne,af as ie,M as ce}from"./index-e79a3e3f.js";import{_ as de}from"./BackBtnView-d3429739.js";import{C as ue}from"./ClientCardView-5f75ea30.js";import"./clientStore-8611536b.js";/* empty css                   */const s=v=>(ee("data-v-5af90af3"),v=v(),te(),v),re={key:0},_e={class:"d-flex align-items-center justify-content-between mb-5"},pe=s(()=>e("p",{class:"m-0 main-title"},"Buyurtmani qaytarish",-1)),me=s(()=>e("div",null,null,-1)),ve={class:"mb-3"},fe={class:"order-card"},he=s(()=>e("p",{class:"underline-title"},"Buyurtma oluvchi",-1)),ge={class:"d-flex align-items-center gap-3 mb-3"},we=s(()=>e("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M10 0C4.48 0 0 4.48 0 10C0 15.52 4.48 20 10 20C15.52 20 20 15.52 20 10C20 4.48 15.52 0 10 0ZM10 4C11.93 4 13.5 5.57 13.5 7.5C13.5 9.43 11.93 11 10 11C8.07 11 6.5 9.43 6.5 7.5C6.5 5.57 8.07 4 10 4ZM10 18C7.97 18 5.57 17.18 3.86 15.12C5.55 13.8 7.68 13 10 13C12.32 13 14.45 13.8 16.14 15.12C14.43 17.18 12.03 18 10 18Z",fill:"black","fill-opacity":"0.4"})],-1)),ye={class:"agent m-0"},Ce={class:"d-flex align-items-center gap-3"},be=s(()=>e("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M17.01 12.38C15.78 12.38 14.59 12.18 13.48 11.82C13.13 11.7 12.74 11.79 12.47 12.06L10.9 14.03C8.07 12.68 5.42 10.13 4.01 7.2L5.96 5.54C6.23 5.26 6.31 4.87 6.2 4.52C5.83 3.41 5.64 2.22 5.64 0.99C5.64 0.45 5.19 0 4.65 0H1.19C0.65 0 0 0.24 0 0.99C0 10.28 7.73 18 17.01 18C17.72 18 18 17.37 18 16.82V13.37C18 12.83 17.55 12.38 17.01 12.38Z",fill:"black","fill-opacity":"0.4"})],-1)),xe={class:"phone m-0"},ke={class:"order-card d-flex flex-column mt-4 gap-3"},Ve={class:"d-flex align-items-center justify-content-between"},Be=s(()=>e("p",{class:"title m-0"},"Yetkazish vaqti",-1)),Le={class:"text m-0"},Ee={class:"d-flex align-items-center justify-content-between"},Me=s(()=>e("p",{class:"title m-0"},"Yangi summa",-1)),Ie={class:"text price m-0"},je={class:"d-flex align-items-center justify-content-between"},Se=s(()=>e("p",{class:"title m-0"},"To’lov usuli",-1)),De={class:"text payment m-0"},qe={class:"my-3"},Ne=s(()=>e("label",{for:"cashback"},"Berilgan pul",-1)),Ze={class:"my-3"},ze=s(()=>e("label",{for:"cashback"},"Qarz",-1)),Oe={class:"debt"},Re={class:"my-3"},Fe=s(()=>e("label",{for:"cashback"},"Avvalgi qarzi",-1)),Ue={class:"debt"},Te={class:"d-flex align-items-center justify-content-between"},$e={class:"d-flex align-items-center gap-3"},Ae={class:"img-wrap"},Pe=["src"],Ye={class:"m-0"},He={class:"d-flex align-items-center gap-2"},Je=s(()=>e("p",{class:"m-0"},"Olindi:",-1)),Qe={class:"m-0"},Ge={class:"el-dropdown-link phone more-icon"},Ke={class:"d-flex justify-content-center"},We={class:"dialog-footer d-flex gap-2 justify-content-center"},Xe=J('<svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-5af90af3><g clip-path="url(#clip0_316_9196)" data-v-5af90af3><path d="M18.5002 6.99984L17.0902 5.58984L10.7502 11.9298L12.1602 13.3398L18.5002 6.99984ZM22.7402 5.58984L12.1602 16.1698L7.98016 11.9998L6.57016 13.4098L12.1602 18.9998L24.1602 6.99984L22.7402 5.58984ZM0.910156 13.4098L6.50016 18.9998L7.91016 17.5898L2.33016 11.9998L0.910156 13.4098Z" fill="white" data-v-5af90af3></path></g><defs data-v-5af90af3><clipPath id="clip0_316_9196" data-v-5af90af3><rect width="24" height="24" fill="white" transform="translate(0.5)" data-v-5af90af3></rect></clipPath></defs></svg>',1),et={__name:"RepetitionView",setup(v){const x=Q(),t=n({}),d=n({}),k=n("");let V=n(!1),u=n(!1),m=n(0),f=n(0),p=n("");n(0);const h=n([]),S=function(){I.go(-1)},D=function(o){u.value=!0,f.value=o,m.value=t.value.products[o].count};let C=n(0);const q=function(){C.value=0,t.value.products[f.value].count=m.value,u.value=!1,t.value.products.forEach(o=>{C.value+=o.count*o.product.sell_price}),t.value.update_total_price=C.value,console.log(t.value.products)},N=function(){p.value?(d.value.delivery_time=t.value.delivery_time,d.value.client_id=t.value.client_id,d.value.payment_type_id=t.value.payment_type_id,d.value.cashback=t.value.cashback,d.value.payment_price=p.value,d.value.products=[],t.value.products.forEach((o,l)=>{d.value.products.push({id:o.id,product_id:o.product_id,stock_product_id:o.stock_product_id,count:o.count,old_count:h.value[l]})}),console.log("sumbitorder",d.value),E.put(`/order/${x.params.id}`,d.value,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(o=>{console.log("",o.data),setTimeout(()=>{I.push("/dillerpanel/business")},500),j.success("Muvofaqqiyatli bajarildi!")}).catch(o=>{console.log(o)})):j.info("Berilgan pul miqdorini kiritin")};return P(()=>{E.get(`/order/${x.params.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(o=>{console.log("ordersss",o.data.data),t.value=o.data.data,t.value.products.forEach(l=>{h.value.push(l.count)}),console.log(h.value),k.value=new Date(o.data.data.delivery_time*1e3),V.value=!0}).catch(o=>{console.log(o)})}),(o,l)=>{const Z=G,z=oe("MoreFilled"),O=ae,R=le,F=se,U=ne,T=ie,B=ce,$=K;return r(V)?(y(),b("div",re,[e("div",_e,[i(de,{onClick:S}),pe,me]),e("div",ve,[i(ue,{legal_name:t.value.client.legal_name,name:t.value.client.name,img:t.value.client.file,location:t.value.client.location,"about-client":t.value.client.id},null,8,["legal_name","name","img","location","about-client"])]),e("div",null,[e("div",fe,[he,e("div",ge,[we,e("p",ye,c(t.value.user.detail[0].first_name)+" "+c(t.value.user.detail[0].last_name),1)]),e("div",Ce,[be,e("p",xe,c(t.value.user.username),1)])])]),e("div",null,[e("div",ke,[e("div",Ve,[Be,e("p",Le,c(k.value.toLocaleDateString("en-US")),1)]),e("div",Ee,[Me,e("p",Ie,c(t.value.update_total_price)+" so’m",1)]),e("div",je,[Se,e("p",De,c(t.value.payment_type.name),1)])])]),e("div",qe,[Ne,i(Z,{max:t.value.update_total_price-r(p),modelValue:r(p),"onUpdate:modelValue":l[0]||(l[0]=a=>g(p)?p.value=a:p=a)},null,8,["max","modelValue"])]),e("div",Ze,[ze,e("div",Oe,c(t.value.update_total_price-r(p))+" so'm ",1)]),e("div",Re,[Fe,e("div",Ue,c(t.value.already_debt)+" so'm",1)]),e("div",null,[(y(!0),b(Y,null,H(t.value.products,(a,L)=>(y(),b("div",{key:L,class:"my-products mb-3"},[e("div",Te,[e("div",$e,[e("div",Ae,[e("img",{src:a.product.file,alt:""},null,8,Pe)]),e("div",null,[e("p",Ye,c(a.product.name),1),e("div",He,[Je,e("p",Qe,c(a.count)+" "+c(a.product.measure),1)])])]),e("div",null,[o.$route.name!=="Salaries"?(y(),W(U,{key:0,trigger:"click"},{dropdown:_(()=>[i(F,null,{default:_(()=>[i(R,{onClick:tt=>D(L),icon:r(X)},{default:_(()=>[w("Edit")]),_:2},1032,["onClick","icon"])]),_:2},1024)]),default:_(()=>[e("button",Ge,[i(O,null,{default:_(()=>[i(z)]),_:1})])]),_:2},1024)):M("",!0)])])]))),128)),i($,{modelValue:r(u),"onUpdate:modelValue":l[3]||(l[3]=a=>g(u)?u.value=a:u=a),title:t.value.products[r(f)].product.measure,width:"80%",center:""},{footer:_(()=>[e("span",We,[i(B,{onClick:l[2]||(l[2]=a=>g(u)?u.value=!1:u=!1)},{default:_(()=>[w("Cancel")]),_:1}),i(B,{type:"primary",onClick:q},{default:_(()=>[w(" Confirm ")]),_:1})])]),default:_(()=>[e("div",Ke,[i(T,{modelValue:r(m),"onUpdate:modelValue":l[1]||(l[1]=a=>g(m)?m.value=a:m=a),min:0,max:h.value[r(f)]},null,8,["modelValue","max"])])]),_:1},8,["modelValue","title"])]),e("div",null,[e("button",{onClick:N,class:"complete-order-btn d-flex justify-content-center gap-2"},[Xe,w("Buyurtmani yakunlash ")])])])):M("",!0)}}},ht=A(et,[["__scopeId","data-v-5af90af3"]]);export{ht as default};
