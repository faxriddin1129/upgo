/* empty css             *//* empty css                       *//* empty css                 *//* empty css                     *//* empty css                  */import{_ as P}from"./BackBtnView-d3429739.js";import{_ as C,j as p,G as M,q as V,ah as A,o as i,c,p as $,g as x,a as t,a4 as F,F as S,r as B,t as l,ai as R,J as j,n as U,b as g,d,l as E,w as T,f,Q as q,i as J,H as L,s as Y,y as Q}from"./index-e79a3e3f.js";import{C as I}from"./ProgressBar.vue_vue_type_style_index_0_scoped_bba5c5c0_lang-bc02e7ce.js";import{u as W}from"./user-c8a57598.js";import{S as G}from"./stock-b7c92c55.js";const H=a=>($("data-v-dcc9a1fe"),a=a(),x(),a),K=H(()=>t("div",{class:"chart-wrap"},[t("div",{class:"canvas-wrapper"},[t("canvas",{height:"250",class:"bar-chart",id:"myChart"})])],-1)),X=[K],Z={__name:"BarChartView",props:{startDate:{type:Number},endDate:{type:Number},statisticData:{type:Object}},setup(a){const e=a;let o=p(null);const r=M(()=>{const b=[],h=[{data:[]}];return e.statisticData.date.forEach(_=>{let k=_.date.slice(8,10),v=_.date.slice(5,7);b.push(`${k}/${v}`)}),e.statisticData.date.forEach(_=>{h[0].data.push(_.sale_price)}),{labels:b,datasets:h}}),y=M(()=>({type:"bar",data:r.value,options:{responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Chart.js Floating Bar Chart"}}}}));return V(()=>{o.value=new I(document.getElementById("myChart"),y.value)}),A(()=>{console.log("ok"),o.value.update()}),(b,h)=>(i(),c("div",null,X))}},tt=C(Z,[["__scopeId","data-v-dcc9a1fe"]]);const at=F({data(){return{chartData:p(null),colors:p([])}},props:["statisticData"],mounted(){const a=this.$refs.myChart;if(!a)return;const e=a.getContext("2d");this.colors=this.generateColors(this.statisticData.expen.length),new I(e,{type:"pie",data:{labels:this.statisticData.expen.map(o=>o.name),datasets:[{label:"My Dataset",data:this.statisticData.expen.map(o=>o.count),backgroundColor:this.colors,borderColor:"#fff",borderWidth:4,borderRadius:3}]},options:{scales:{}}})},methods:{generateColors(a){const e=[];for(let o=0;o<a;o++)e.push(`#${Math.floor(Math.random()*16777215).toString(16)}`);return e}}}),et=a=>($("data-v-cd3c895e"),a=a(),x(),a),st={class:"chart-wrap"},lt={height:"250",id:"myChart2",ref:"myChart"},ot={class:"pie-chart-wrap"},nt=et(()=>t("thead",null,[t("tr",null,[t("th",null,"No"),t("th",null,"Mahsulot"),t("th",null,"Nisbati"),t("th",null,"Summa")])],-1)),it={class:"d-flex align-items-center gap-2"};function ct(a,e,o,r,y,b){return i(),c("div",null,[t("div",st,[t("canvas",lt,null,512)]),t("div",ot,[t("table",null,[nt,t("tbody",null,[(i(!0),c(S,null,B(a.statisticData.expen,(h,_)=>(i(),c("tr",{key:_},[t("td",null,l(_+1),1),t("td",it,[t("div",{class:"color-span",style:R(`background-color: ${a.colors[_]}`)},null,4),j(" "+l(h.name),1)]),t("td",null,l(h.expen),1),t("td",null,l(h.price)+" so'm",1)]))),128))])]),j(" "+l(a.chartData),1)])])}const dt=C(at,[["render",ct],["__scopeId","data-v-cd3c895e"]]),rt=a=>($("data-v-bba5c5c0"),a=a(),x(),a),ut={class:"pie-chart-wrap"},_t={class:"clients-percent"},pt={class:"m-0 percent"},ht=rt(()=>t("p",{class:"m-0 text"},"active mijozlar",-1)),mt={__name:"ProgressBar",props:{startDate:{type:Object},endDate:{type:Number}},setup(a){const e=a,o=p(null);return V(()=>{const r=o.value.getContext("2d");new I(r,{type:"doughnut",data:{labels:["Aktiv mijozlar","Boshqalar"],datasets:[{data:[e.startDate.activeClients.length*100/e.endDate,100-e.startDate.activeClients.length*100/e.endDate],backgroundColor:["#2596be","#E0E0E0"],borderWidth:0}]},options:{cutoutPercentage:85,animation:{animateRotate:!0,duration:1500},legend:{display:!1},tooltips:{enabled:!1}}})}),(r,y)=>(i(),c("div",null,[t("div",ut,[t("canvas",{ref_key:"chart",ref:o,class:"mb-3"},null,512),t("div",_t,[t("p",pt,l((e.startDate.activeClients.length*100/e.endDate).toFixed(0))+"% ",1),ht])])]))}},bt=C(mt,[["__scopeId","data-v-bba5c5c0"]]);const u=a=>($("data-v-df492cc7"),a=a(),x(),a),vt={class:"statistics"},gt={class:"d-flex align-items-center justify-content-between mb-4"},ft=u(()=>t("p",{class:"m-0 text-center main-title"},"Statistika",-1)),yt=u(()=>t("div",null,null,-1)),wt={class:"staff-statistic"},kt=u(()=>t("p",{class:"label-text mb-1"},"Muddatni tanlang",-1)),Dt={class:"datepicker-wrap"},Ct={key:0,class:"row"},$t={class:"col-md-6 col-6"},xt={class:"col-md-6 col-6"},St={class:"col-md-12 my-3"},Bt={key:1,class:"row"},Vt={key:0},It=u(()=>t("ul",{class:"nav nav-pills mb-3",id:"pills-tab",role:"tablist"},[t("li",{class:"nav-item w-50",role:"presentation"},[t("button",{class:"nav-link active w-100",id:"pills-home-tab","data-bs-toggle":"pill","data-bs-target":"#pills-home",type:"button",role:"tab","aria-controls":"pills-home","aria-selected":"true"}," Diagramma ")]),t("li",{class:"nav-item w-50",role:"presentation"},[t("button",{class:"nav-link w-100",id:"pills-profile-tab","data-bs-toggle":"pill","data-bs-target":"#pills-profile",type:"button",role:"tab","aria-controls":"pills-profile","aria-selected":"false"}," Jadval ")])],-1)),Nt={class:"tab-content",id:"pills-tabContent"},Mt={key:0,class:"tab-pane fade show active",id:"pills-home",role:"tabpanel","aria-labelledby":"pills-home-tab"},jt=u(()=>t("p",{class:"heading-text mb-2 mt-3"},"Mahsulotlar sotuvi boâ€™yicha",-1)),Et=u(()=>t("hr",null,null,-1)),Yt=u(()=>t("p",{class:"heading-text mb-2"},"Aktiv mijozlar statistikasi",-1)),zt={class:"progress-bar"},Ot=u(()=>t("button",{class:"see-detail-btn"},"Batafsil ko'rish",-1)),Pt={class:"tab-pane fade",id:"pills-profile",role:"tabpanel","aria-labelledby":"pills-profile-tab"},At={class:"wrap-table"},Ft=u(()=>t("thead",null,[t("tr",null,[t("th",null,"Nomi"),t("th",null,"Qiymati")])],-1)),Rt=u(()=>t("td",null,"Sotiladigan summa",-1)),Ut=u(()=>t("td",null,"Olingan narx",-1)),Tt=u(()=>t("td",null,"Foyda",-1)),qt={class:"wrap-table wrap-detail-table"},Jt={class:"detail-table"},Lt=u(()=>t("thead",null,[t("tr",null,[t("th",null,"No"),t("th",null,"Sana"),t("th",null,"Foyda"),t("th",null,"Olingan"),t("th",null,"Sotilgan")])],-1)),Qt={key:0},Wt={key:1},Gt={key:2},Ht={key:3},Kt={key:4},Xt={class:"wrap-table wrap-detail-table"},Zt={class:"d-flex align-items-center justify-content-between mt-4 mb-2"},ta=u(()=>t("h5",{class:"py-2"},"Obmordagi mahsulotlar:",-1)),aa={class:"table detail-table"},ea=u(()=>t("tr",{class:"th-row"},[t("th",null,"No"),t("th",null,"Nomi"),t("th",null,"Soni"),t("th",null,"O'lchami"),t("th",null,"Olingan narxi"),t("th",null,"Narxi")],-1)),sa={__name:"StatisticsView",setup(a){L();let e=p(null),o=p(null),r=p(null),y=p(!0);const b=p(null),h=W(),_=function(){window.location.reload()};let k=function(){new Date(e.value),y.value=!1,Y.get(`/statistics?start=${e.value/1e3}&end=${o.value/1e3}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(n=>{console.log(n.data),h.statisticData=n.data,r.value=n.data}).catch(n=>{console.log(n)}),Y.get("/client",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(n=>{console.log("cliints",n.data.data.length),b.value=n.data.data.length}).catch(n=>{console.log(n)})};const v=U({data:[],load:!1}),N=p(0);V(()=>{G.LIST().then(n=>{var m;v.data=(m=n==null?void 0:n.data)==null?void 0:m.data,v.data.length&&(v.load=!0),console.log("2",n.data.data),v.data.forEach(D=>{N.value+=D.product.sell_price})}).catch(n=>{console.log(n),toast.error(n)})});let z=function(){Q.push({name:"dillerpanel",path:"/dillerpanel"})};return(n,m)=>{const D=q,O=J("router-link");return i(),c("div",vt,[t("div",gt,[g(P,{onClick:d(z)},null,8,["onClick"]),ft,yt]),t("div",null,[t("div",wt,[kt,t("div",Dt,[d(y)?(i(),c("div",Ct,[t("div",$t,[g(D,{modelValue:d(e),"onUpdate:modelValue":m[0]||(m[0]=s=>E(e)?e.value=s:e=s),type:"date",placeholder:"Boshlanish",size:"large",class:"w-100",format:"DD/MM/YYYY","value-format":"x"},null,8,["modelValue"])]),t("div",xt,[g(D,{modelValue:d(o),"onUpdate:modelValue":m[1]||(m[1]=s=>E(o)?o.value=s:o=s),type:"date",placeholder:"Tugashi",size:"large",class:"w-100",format:"DD/MM/YYYY","value-format":"x"},null,8,["modelValue"])]),t("div",St,[t("button",{onClick:m[2]||(m[2]=(...s)=>d(k)&&d(k)(...s)),class:"period-btn"}," Muddatni ko'rish ")])])):(i(),c("div",Bt,[t("div",{class:"col-md-12"},[t("button",{onClick:_,class:"period-btn"}," Yangi muddat kiritish ")])]))])]),d(r)?(i(),c("div",Vt,[It,t("div",Nt,[d(r)?(i(),c("div",Mt,[g(tt,{"statistic-data":d(r),"start-date":d(e),"end-date":d(o)},null,8,["statistic-data","start-date","end-date"]),jt,g(dt,{"statistic-data":d(r)},null,8,["statistic-data"]),Et,Yt,t("div",zt,[g(bt,{startDate:d(r),endDate:b.value},null,8,["startDate","endDate"]),g(O,{to:"/statistics/active-clients"},{default:T(()=>[Ot]),_:1})])])):f("",!0),t("div",Pt,[t("div",At,[t("table",null,[Ft,t("tbody",null,[t("tr",null,[Rt,t("td",null,l(d(r).sale_price)+" so'm",1)]),t("tr",null,[Ut,t("td",null,l(d(r).get_price)+" so'm",1)]),t("tr",null,[Tt,t("td",null,l(d(r).benefit_price)+" so'm",1)])])])]),t("div",qt,[t("table",Jt,[Lt,t("tbody",null,[(i(!0),c(S,null,B(d(r).date,(s,w)=>(i(),c("tr",{key:w},[s.sale_price?(i(),c("td",Qt,l(w+1),1)):f("",!0),s.sale_price?(i(),c("td",Wt,l(s.date),1)):f("",!0),s.sale_price?(i(),c("td",Gt,l(s.benefit_price)+" so'm ",1)):f("",!0),s.sale_price?(i(),c("td",Ht,l(s.get_price)+" so'm",1)):f("",!0),s.sale_price?(i(),c("td",Kt,l(s.sale_price)+" so'm",1)):f("",!0)]))),128))])])]),t("div",Xt,[t("div",Zt,[ta,t("h5",null,l(N.value)+" so'm",1)]),t("table",aa,[ea,(i(!0),c(S,null,B(v.data,(s,w)=>(i(),c("tr",{class:"td-row",key:w},[t("td",null,l(w+1),1),t("td",null,l(s.product.name),1),t("td",null,l(s.count),1),t("td",null,l(s.product.measure),1),t("td",null,l(s.product.get_price),1),t("td",null,l(s.product.sell_price)+" so'm",1)]))),128))])])])])])):f("",!0)])])}}},ha=C(sa,[["__scopeId","data-v-df492cc7"]]);export{ha as default};
